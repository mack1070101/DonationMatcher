<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_131) on Wed Aug 09 02:35:48 MDT 2017 -->
<title>DatabaseController</title>
<meta name="date" content="2017-08-09">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
<script type="text/javascript" src="../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="DatabaseController";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../controllers/DatabaseControllerTest.html" title="class in controllers"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?controllers/DatabaseController.html" target="_top">Frames</a></li>
<li><a href="DatabaseController.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">controllers</div>
<h2 title="Class DatabaseController" class="title">Class DatabaseController</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>controllers.DatabaseController</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">DatabaseController</span>
extends java.lang.Object</pre>
<div class="block">Created by mackenzie on 07/08/17.

 A controller for handling all interaction with the database
 used to store and query for information.


 TODO in the future, track amounts of food to factor that in on matching
 TODO convert to singleton pattern</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../controllers/DatabaseController.html#DatabaseController--">DatabaseController</a></span>()</code>
<div class="block">Constructor for database controller</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../controllers/DatabaseController.html#DatabaseController-java.lang.String-">DatabaseController</a></span>(java.lang.String&nbsp;databaseName)</code>
<div class="block">Constructor for database controller</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../controllers/DatabaseController.html#close--">close</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../controllers/DatabaseController.html#createPersonsTable--">createPersonsTable</a></span>()</code>
<div class="block">Generates table in SQLITE to hold person objects</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../controllers/DatabaseController.html#createPickupTable--">createPickupTable</a></span>()</code>
<div class="block">Generates table in SQLITE to hold pickup objects</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../controllers/DatabaseController.html#createRecipientTable--">createRecipientTable</a></span>()</code>
<div class="block">Generates table in SQLITE to hold recipient objects</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>java.sql.ResultSet</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../controllers/DatabaseController.html#fetchSuitableRecipients-models.Pickup-">fetchSuitableRecipients</a></span>(<a href="../models/Pickup.html" title="class in models">Pickup</a>&nbsp;pickup)</code>
<div class="block">Fetches all the recipients that match the criteria for a match.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../models/Person.html" title="class in models">Person</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../controllers/DatabaseController.html#getPerson-java.lang.String-">getPerson</a></span>(java.lang.String&nbsp;personId)</code>
<div class="block">TODO future improvement: cache the Person
 Fetches from the database and returns a Person object</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="../models/Pickup.html" title="class in models">Pickup</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../controllers/DatabaseController.html#getPickup-java.lang.String-">getPickup</a></span>(java.lang.String&nbsp;personId)</code>&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../controllers/DatabaseController.html#insertIntoPersonTable-java.lang.String:A-">insertIntoPersonTable</a></span>(java.lang.String[]&nbsp;string)</code>
<div class="block">Inserts the passed in array of strings into the persons table
 from where it is called in CLI main.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../controllers/DatabaseController.html#insertIntoPickupTable-java.lang.String:A-">insertIntoPickupTable</a></span>(java.lang.String[]&nbsp;string)</code>
<div class="block">Inserts the passed in array of strings into the pickup table
 from where it is called in CLI main.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../controllers/DatabaseController.html#insertIntoRecipientTable-java.lang.String:A-">insertIntoRecipientTable</a></span>(java.lang.String[]&nbsp;string)</code>
<div class="block">Inserts the passed in array of strings into the persons table
 from where it is called in CLI main.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DatabaseController--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DatabaseController</h4>
<pre>public&nbsp;DatabaseController()</pre>
<div class="block">Constructor for database controller</div>
</li>
</ul>
<a name="DatabaseController-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DatabaseController</h4>
<pre>public&nbsp;DatabaseController(java.lang.String&nbsp;databaseName)</pre>
<div class="block">Constructor for database controller</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>databaseName</code> - name of database you want to use</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="createPersonsTable--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createPersonsTable</h4>
<pre>public&nbsp;void&nbsp;createPersonsTable()
                        throws java.sql.SQLException</pre>
<div class="block">Generates table in SQLITE to hold person objects</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if problem occurs</dd>
</dl>
</li>
</ul>
<a name="createPickupTable--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createPickupTable</h4>
<pre>public&nbsp;void&nbsp;createPickupTable()
                       throws java.sql.SQLException</pre>
<div class="block">Generates table in SQLITE to hold pickup objects</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code></dd>
</dl>
</li>
</ul>
<a name="createRecipientTable--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createRecipientTable</h4>
<pre>public&nbsp;void&nbsp;createRecipientTable()
                          throws java.sql.SQLException</pre>
<div class="block">Generates table in SQLITE to hold recipient objects</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code></dd>
</dl>
</li>
</ul>
<a name="insertIntoPersonTable-java.lang.String:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insertIntoPersonTable</h4>
<pre>public&nbsp;void&nbsp;insertIntoPersonTable(java.lang.String[]&nbsp;string)
                           throws java.sql.SQLException</pre>
<div class="block">Inserts the passed in array of strings into the persons table
 from where it is called in CLI main. It is currently taking
 a string for expediency. Note it will take empty strings for
 every field execept Phone. This was done to ensure maximum flexibility
 and so that inputs are not lost.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>string</code> - array of strings containing person data</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - TODO make it take person object.</dd>
</dl>
</li>
</ul>
<a name="insertIntoPickupTable-java.lang.String:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insertIntoPickupTable</h4>
<pre>public&nbsp;void&nbsp;insertIntoPickupTable(java.lang.String[]&nbsp;string)
                           throws java.sql.SQLException</pre>
<div class="block">Inserts the passed in array of strings into the pickup table
 from where it is called in CLI main. It is currently taking
 a string for expediency</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>string</code> - containing pickup data</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - TODO make it take pickup object.</dd>
</dl>
</li>
</ul>
<a name="insertIntoRecipientTable-java.lang.String:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insertIntoRecipientTable</h4>
<pre>public&nbsp;void&nbsp;insertIntoRecipientTable(java.lang.String[]&nbsp;string)
                              throws java.sql.SQLException</pre>
<div class="block">Inserts the passed in array of strings into the persons table
 from where it is called in CLI main. It is currently taking
 a string for expediency</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>string</code> - array of strings that represents a person data</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - TODO make it take recipient object.</dd>
</dl>
</li>
</ul>
<a name="fetchSuitableRecipients-models.Pickup-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fetchSuitableRecipients</h4>
<pre>public&nbsp;java.sql.ResultSet&nbsp;fetchSuitableRecipients(<a href="../models/Pickup.html" title="class in models">Pickup</a>&nbsp;pickup)
                                           throws java.sql.SQLException</pre>
<div class="block">Fetches all the recipients that match the criteria for a match.
 It builds a query string to execute as a ResultSet so that
 the database can be queried line by line in your main function to reduce
 memory overhead in the event of a large database
 <p>
 <p>
 NOTE: Distance query is done as a simple bounding box. An Rtree would be implemented
 in the future to support rapid geographic queries</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>pickup</code> - pickup object that suitable recipients should be found for</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>result set to iterate on in main</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code></dd>
</dl>
</li>
</ul>
<a name="getPickup-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPickup</h4>
<pre>public&nbsp;<a href="../models/Pickup.html" title="class in models">Pickup</a>&nbsp;getPickup(java.lang.String&nbsp;personId)
                 throws java.sql.SQLException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code></dd>
</dl>
</li>
</ul>
<a name="getPerson-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPerson</h4>
<pre>public&nbsp;<a href="../models/Person.html" title="class in models">Person</a>&nbsp;getPerson(java.lang.String&nbsp;personId)
                 throws java.sql.SQLException</pre>
<div class="block">TODO future improvement: cache the Person
 Fetches from the database and returns a Person object</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>personId</code> - identifier of the person</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a Person object</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code></dd>
</dl>
</li>
</ul>
<a name="close--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()
           throws java.sql.SQLException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../controllers/DatabaseControllerTest.html" title="class in controllers"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?controllers/DatabaseController.html" target="_top">Frames</a></li>
<li><a href="DatabaseController.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
